<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claudeç³»ç»ŸçŠ¶æ€æ </title>
    <link href="https://fonts.googleapis.com/css2?family=Elms+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
<body>
    <style>
        /* --- ä¿æŒåŸæœ‰ CSS æ ·å¼å®Œå…¨ä¸å˜ --- */
        .cd-status-container {
            font-family: 'Elms Sans', -apple-system, BlinkMacSystemFont, sans-serif;
            width: 100%;
            background: #fdf3ee;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 2px 10px rgba(20, 18, 8, 0.1);
            min-height: 120px;
        }

        /* å¤©æ°”èƒŒæ™¯åŠ¨ç”»å±‚ */
        .weather-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        /* æ™´å¤©æ•ˆæœ */
        .weather-sunny .weather-background { background: linear-gradient(135deg, rgba(255, 230, 150, 0.4), rgba(255, 200, 100, 0.2)); }
        .sun-ray {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0;
            background: conic-gradient(from 0deg, transparent 0deg, rgba(255, 220, 100, 0.6) 20deg, transparent 40deg, transparent 60deg, rgba(255, 200, 50, 0.5) 80deg, transparent 100deg, transparent 120deg, rgba(255, 230, 150, 0.6) 140deg, transparent 160deg, transparent 180deg, rgba(255, 210, 80, 0.5) 200deg, transparent 220deg, transparent 240deg, rgba(255, 240, 180, 0.6) 260deg, transparent 280deg, transparent 300deg, rgba(255, 200, 100, 0.5) 320deg, transparent 340deg, transparent 360deg);
            animation: sunRotate 20s linear infinite;
        }
        @keyframes sunRotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* å¤šäº‘æ•ˆæœ */
        .weather-cloudy .weather-background { background: linear-gradient(135deg, #d0d0d0, #e8e8e8); }
        .cloud { position: absolute; background: rgba(255, 255, 255, 0.95); border-radius: 100px; opacity: 0.9; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .cloud::before, .cloud::after { content: ''; position: absolute; background: rgba(255, 255, 255, 0.95); border-radius: 100px; }
        .cloud1 { width: 80px; height: 30px; top: 15%; animation: cloudMove 15s linear infinite; }
        .cloud1::before { width: 50px; height: 50px; top: -25px; left: 10px; }
        .cloud1::after { width: 60px; height: 40px; top: -20px; right: 10px; }
        .cloud2 { width: 100px; height: 35px; top: 55%; animation: cloudMove 20s linear infinite; animation-delay: -8s; }
        .cloud2::before { width: 60px; height: 60px; top: -30px; left: 20px; }
        .cloud2::after { width: 70px; height: 45px; top: -22px; right: 15px; }
        @keyframes cloudMove { from { left: -150px; } to { left: 100%; } }

        /* é›¨å¤©æ•ˆæœ */
        .weather-rainy .weather-background { background: linear-gradient(135deg, #5a6e82, #8095aa); }
        .rain-drop {
            position: absolute; width: 2px; height: 30px;
            background: linear-gradient(to bottom, transparent 0%, rgba(150, 200, 255, 0.6) 30%, rgba(180, 220, 255, 0.9) 70%, rgba(200, 230, 255, 1) 100%);
            animation: rainFall linear infinite; border-radius: 0 0 3px 3px;
        }
        @keyframes rainFall { from { transform: translateY(-30px); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } to { transform: translateY(var(--container-height)); opacity: 0; } }
        .rain-splash {
            position: absolute; bottom: 5px; width: 4px; height: 4px; border: 2px solid rgba(150, 200, 255, 0.8); border-radius: 50%; animation: splash 1.5s ease-out infinite;
        }
        @keyframes splash { 0% { transform: scale(0) translateY(0); opacity: 1; border-width: 2px; } 50% { transform: scale(2) translateY(-10px); opacity: 0.6; border-width: 1px; } 100% { transform: scale(4) translateY(-5px); opacity: 0; border-width: 0.5px; } }

        /* æš´é£é›¨æ•ˆæœ */
        .weather-stormy .weather-background { background: linear-gradient(135deg, #3a4856, #5a6878); }

        /* é›ªå¤©æ•ˆæœ */
        .weather-snowy .weather-background { background: linear-gradient(135deg, #c8d4e0, #e0e8f0); }
        .snowflake { position: absolute; color: white; font-size: 1.2em; text-shadow: 0 0 5px rgba(255, 255, 255, 0.8); animation: snowFall linear infinite; user-select: none; }
        @keyframes snowFall { 0% { transform: translateY(-20px) translateX(0) rotate(0deg); opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { transform: translateY(var(--container-height)) translateX(30px) rotate(360deg); opacity: 0; } }

        /* é›¾å¤©æ•ˆæœ */
        .weather-foggy .weather-background { background: linear-gradient(135deg, #b8b8b8, #d0d0d0); }
        .fog-layer {
            position: absolute; width: 200%; height: 120%; top: -10%;
            background: linear-gradient(90deg, transparent, rgba(200, 200, 200, 0.8) 20%, rgba(220, 220, 220, 0.6) 50%, rgba(200, 200, 200, 0.8) 80%, transparent);
            animation: fogMove 12s ease-in-out infinite;
        }
        @keyframes fogMove { 0%, 100% { transform: translateX(-50%); opacity: 0.6; } 50% { transform: translateX(0); opacity: 0.9; } }

        /* é—ªç”µæ•ˆæœ */
        .lightning-flash {
            position: absolute; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 200, 0.9) 50%, rgba(255, 255, 255, 0) 100%);
            opacity: 0; animation: lightning 4s infinite; pointer-events: none; mix-blend-mode: screen;
        }
        @keyframes lightning { 0%, 85%, 88%, 91%, 94%, 100% { opacity: 0; } 86%, 92% { opacity: 0.8; } 89%, 95% { opacity: 1; } }

        /* ä¸»å†…å®¹åŒºåŠé€šç”¨æ ·å¼ */
        .status-content { position: relative; z-index: 2; padding: 16px 20px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        @media (max-width: 768px) { .status-content { grid-template-columns: repeat(2, 1fr); gap: 15px; } }
        .status-block {
            background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
            border-radius: 10px; padding: 15px; border: 1px solid rgba(218, 118, 86, 0.2);
            transition: all 0.3s ease; animation: slideIn 0.5s ease-out;
        }
        .status-block:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(218, 118, 86, 0.15); background: rgba(255, 255, 255, 0.95); }
        @keyframes slideIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .block-title { font-size: 11px; font-weight: 600; color: #141208; opacity: 0.5; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }
        .main-info { font-size: 18px; font-weight: 500; color: #141208; margin-bottom: 4px; animation: fadeIn 0.8s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .sub-info { font-size: 13px; color: #141208; opacity: 0.7; display: flex; align-items: center; gap: 8px; margin-top: 4px; }
        .icon { display: inline-block; font-size: 20px; animation: bounce 2s ease-in-out infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
        .progress-bar { height: 4px; background: rgba(218, 118, 86, 0.1); border-radius: 2px; overflow: hidden; margin-top: 8px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #da7656, #e89176); border-radius: 2px; transition: width 1s ease; animation: progressPulse 2s ease-in-out infinite; }
        @keyframes progressPulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
        .tag { display: inline-block; padding: 3px 8px; background: rgba(218, 118, 86, 0.1); color: #da7656; border-radius: 12px; font-size: 11px; font-weight: 500; }
        .metric-value { font-size: 24px; font-weight: 700; color: #da7656; animation: numberTick 0.5s ease-out; }
        @keyframes numberTick { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* ç‰¹æ®ŠçŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status-indicator { width: 8px; height: 8px; border-radius: 50%; display: inline-block; animation: pulse 2s ease-in-out infinite; }
        .status-optimal { background: #4ade80; }
        .status-neutral { background: #facc15; }
        .status-passive { background: #fb923c; }
        .status-reluctant { background: #f87171; }
        .status-minimal { background: #a78bfa; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.7; } }

        /* Moodå…‰æ™• */
        .mood-glow { position: absolute; top: 50%; right: 10px; transform: translateY(-50%); width: 4px; height: 20px; border-radius: 2px; opacity: 0.5; }
        .glow-optimal { background: #4ade80; }
        .glow-neutral { background: #facc15; }
        .glow-passive { background: #fb923c; }
        .glow-reluctant { background: #f87171; }
        .glow-minimal { background: #a78bfa; }
    </style>

    <div class="cd-status-container" id="status-container">
        <!-- å¤©æ°”èƒŒæ™¯æ•ˆæœå±‚ -->
        <div class="weather-background" id="weather-bg"></div>

        <!-- ä¸»å†…å®¹ -->
        <div class="status-content">
            <!-- ç¬¬ä¸€æ ï¼šæ—¥æœŸæ—¶é—´ -->
            <div class="status-block" style="animation-delay: 0.1s;">
                <div class="block-title">System Time</div>
                <div class="main-info">
                    <span class="icon">ğŸ“…</span> <span id="r-time"></span>
                </div>
                <div class="sub-info">
                    <span id="r-date"></span> Â· <span id="r-weekday"></span>
                </div>
            </div>

            <!-- ç¬¬äºŒæ ï¼šç¯å¢ƒä¿¡æ¯ -->
            <div class="status-block" style="animation-delay: 0.2s;">
                <div class="block-title">Environment</div>
                <div class="main-info">
                    <span class="icon" id="weather-icon">â˜€ï¸</span>
                    <span class="metric-value" id="r-temp"></span>
                </div>
                <div class="sub-info">
                    ä½“æ„Ÿ <span id="r-feels"></span> Â· æ¹¿åº¦ <span id="r-humidity"></span>
                </div>
            </div>

            <!-- ç¬¬ä¸‰æ ï¼šç³»ç»ŸçŠ¶æ€ -->
            <div class="status-block" style="animation-delay: 0.3s; position: relative;">
                <div class="mood-glow" id="mood-glow"></div>
                <div class="block-title">Claude System Status</div>
                <div class="main-info">
                    <span class="status-indicator" id="status-dot"></span>
                    <span style="margin-left: 8px;" id="r-status-text"></span>
                </div>
                <div class="sub-info">
                    <span class="tag" id="r-mood-tag"></span>
                    <span style="margin-left: auto;" id="r-progress-text"></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="r-progress-bar"></div>
                </div>
            </div>

            <!-- ç¬¬å››æ ï¼šç”¨æˆ·æ´»åŠ¨ -->
            <div class="status-block" style="animation-delay: 0.4s;">
                <div class="block-title">User Activity</div>
                <div class="main-info" style="font-size: 16px;">
                    <span class="icon">ğŸ‘¤</span> <span id="r-activity"></span>
                </div>
                <div class="sub-info">
                    ç”¨æˆ·ç”Ÿäº§åŠ›è¯„åˆ†: <span class="metric-value" style="font-size: 18px;" id="r-score"></span>
                </div>
            </div>
        </div>
    </div>

    <script>
        (function() {
            // 1. è·å–å…¨å±€å‚æ•°
            const data = window.TH_REMOTE_PARAMS || {};
            
            // å®‰å…¨è·å–å‚æ•°çš„è¾…åŠ©å‡½æ•°
            const get = (key) => data[key] || '';

            // 2. å¡«å…… DOM å†…å®¹
            const setText = (id, val) => { const el = document.getElementById(id); if(el) el.textContent = val; };
            
            setText('r-date', get('date'));         // $1
            setText('r-time', get('time'));         // $2
            setText('r-weekday', get('weekday'));   // $3
            setText('r-temp', get('temp'));         // $5
            setText('r-feels', get('feelsLike'));   // $6
            setText('r-humidity', get('humidity')); // $7
            setText('r-status-text', get('moodStatus')); // $8
            setText('r-mood-tag', get('moodTag'));  // $9
            setText('r-progress-text', get('progress')); // $10
            setText('r-activity', get('activity')); // $11
            setText('r-score', get('score'));       // $12

            // è®¾ç½®è¿›åº¦æ¡å®½åº¦
            const progBar = document.getElementById('r-progress-bar');
            if(progBar) progBar.style.width = get('progress');

            // 3. å¤„ç†åŠ¨æ€æ ·å¼ (Status & Weather)
            const moodStatus = get('moodStatus'); // $8
            const weatherType = get('weatherType'); // $4

            // è®¾ç½® Mood ç›¸å…³çš„ class
            const moodClassSuffix = moodStatus.toLowerCase(); // optimal, neutral etc.
            const statusDot = document.getElementById('status-dot');
            const moodGlow = document.getElementById('mood-glow');
            
            if(statusDot) statusDot.className = `status-indicator status-${moodClassSuffix}`;
            if(moodGlow) moodGlow.className = `mood-glow glow-${moodClassSuffix}`;

            // 4. å¤©æ°”åŠ¨ç”»é€»è¾‘ (ä¿æŒåŸé€»è¾‘ï¼Œå˜é‡æ”¹ç”¨ get('weatherType'))
            const container = document.getElementById('status-container');
            const weatherBg = document.getElementById('weather-bg');
            const weatherIcon = document.getElementById('weather-icon');

            // è·å–å®¹å™¨å®é™…é«˜åº¦
            const containerHeight = container.offsetHeight;
            container.style.setProperty('--container-height', containerHeight + 'px');

            // è®¾ç½®å¤©æ°”å›¾æ ‡
            const weatherIcons = {
                'sunny': 'â˜€ï¸', 'cloudy': 'â˜ï¸', 'rainy': 'ğŸŒ§ï¸', 
                'snowy': 'â„ï¸', 'stormy': 'â›ˆï¸', 'foggy': 'ğŸŒ«ï¸'
            };
            weatherIcon.textContent = weatherIcons[weatherType] || 'ğŸŒ¤ï¸';

            // è®¾ç½®å®¹å™¨å¤©æ°” Class
            container.className = `cd-status-container weather-${weatherType}`;

            // æ ¹æ®å¤©æ°”ç±»å‹ç”ŸæˆåŠ¨ç”»å…ƒç´ 
            switch(weatherType) {
                case 'sunny':
                    const sunRay = document.createElement('div');
                    sunRay.className = 'sun-ray';
                    weatherBg.appendChild(sunRay);
                    break;
                case 'cloudy':
                    for(let i = 0; i < 2; i++) {
                        const cloud = document.createElement('div');
                        cloud.className = `cloud cloud${i+1}`;
                        weatherBg.appendChild(cloud);
                    }
                    break;
                case 'rainy':
                    for(let i = 0; i < 40; i++) {
                        const drop = document.createElement('div');
                        drop.className = 'rain-drop';
                        drop.style.left = Math.random() * 100 + '%';
                        drop.style.animationDuration = (Math.random() * 0.5 + 0.4) + 's';
                        drop.style.animationDelay = Math.random() * 2 + 's';
                        drop.style.opacity = Math.random() * 0.4 + 0.6;
                        drop.style.filter = `blur(${Math.random() * 0.5}px)`;
                        weatherBg.appendChild(drop);
                    }
                    for(let i = 0; i < 10; i++) {
                        setTimeout(() => {
                            const splash = document.createElement('div');
                            splash.className = 'rain-splash';
                            splash.style.left = Math.random() * 100 + '%';
                            splash.style.animationDelay = Math.random() * 1.5 + 's';
                            weatherBg.appendChild(splash);
                        }, i * 200);
                    }
                    break;
                case 'stormy':
                    for(let i = 0; i < 60; i++) {
                        const drop = document.createElement('div');
                        drop.className = 'rain-drop';
                        drop.style.left = Math.random() * 100 + '%';
                        drop.style.animationDuration = (Math.random() * 0.3 + 0.2) + 's';
                        drop.style.animationDelay = Math.random() * 1 + 's';
                        drop.style.opacity = Math.random() * 0.3 + 0.7;
                        drop.style.height = '40px';
                        weatherBg.appendChild(drop);
                    }
                    const lightning = document.createElement('div');
                    lightning.className = 'lightning-flash';
                    weatherBg.appendChild(lightning);
                    break;
                case 'snowy':
                    const snowflakes = ['â„', 'â…', 'â†'];
                    for(let i = 0; i < 25; i++) {
                        const snow = document.createElement('div');
                        snow.className = 'snowflake';
                        snow.textContent = snowflakes[Math.floor(Math.random() * snowflakes.length)];
                        snow.style.left = Math.random() * 100 + '%';
                        snow.style.animationDuration = (Math.random() * 3 + 2) + 's';
                        snow.style.animationDelay = Math.random() * 2 + 's';
                        snow.style.fontSize = (Math.random() * 1 + 0.8) + 'em';
                        weatherBg.appendChild(snow);
                    }
                    break;
                case 'foggy':
                    for(let i = 0; i < 3; i++) {
                        const fog = document.createElement('div');
                        fog.className = 'fog-layer';
                        fog.style.animationDelay = i * 4 + 's';
                        fog.style.animationDuration = (12 + i * 2) + 's';
                        weatherBg.appendChild(fog);
                    }
                    break;
            }
        })();
    </script>
</body>
</html>
