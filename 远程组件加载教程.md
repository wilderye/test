# 酒馆远程组件加载教程

> **适用场景**：你有一个在酒馆里能正常渲染的前端组件（状态栏、播放器等），想把它托管到网上，方便以后更新时用户无需手动替换代码。

---

## 简单原理

1. 你把组件代码上传到 **GitHub**（一个免费的代码托管网站）。
2. 通过 **jsDelivr**（一个免费的 CDN 加速服务）生成一个公开链接。
3. 在酒馆的**正则替换**中写一段"加载器"代码，让酒馆自动从这个链接拉取你的组件。
4. 以后你更新 GitHub 上的代码，用户的酒馆会**自动获取新版**，无需任何操作。

---

## 第一步：注册 GitHub 账号

1. 打开 [github.com](https://github.com)
2. 点击右上角 **Sign up**
3. 按提示填写邮箱、密码、用户名，完成注册
4. 验证邮箱后登录

---

## 第二步：创建仓库

1. 登录后，点击右上角 **+** 号 → **New repository**
2. 填写信息：
   - **Repository name**（仓库名）：随便起，比如 `my-components`
   - **Description**（描述）：可选，比如"我的酒馆组件"
   - **Public**：✅ 必须选公开，否则 CDN 无法访问
3. 点击 **Create repository** 创建

---

## 第三步：上传组件代码

### 3.1 准备你的组件文件

把你在酒馆里测试成功的代码保存为 `.html` 文件。

> **注意**：如果你的代码开头有 `<html>` 标签，**建议删掉** `<html>` 和 `</html>`，只保留 `<head>` 和 `<body>` 部分。不删也能用，但结构更规范。

### 3.2 上传到 GitHub

1. 进入你刚创建的仓库页面
2. 点击 **Add file** → **Upload files**
3. 把你的 `.html` 文件拖进去
4. 在下方 **Commit changes** 区域随便写点说明（比如"上传组件"）
5. 点击绿色 **Commit changes** 按钮

上传成功后，你会在仓库里看到你的文件。

---

## 第四步：获取 CDN 链接

你的文件现在可以通过 jsDelivr CDN 访问了。链接格式为：

```
https://testingcf.jsdelivr.net/gh/你的用户名/你的仓库名@main/你的文件名.html
```

**示例**：

- 用户名：`zhangsan`
- 仓库名：`my-components`
- 文件名：`player.html`

则链接为：

```
https://testingcf.jsdelivr.net/gh/zhangsan/my-components@main/player.html
```

> 💡 **提示**：`@main` 表示引用主分支的最新代码。你更新 GitHub 后，这个链接会自动指向新版（可能有几分钟延迟）。

---

## 第五步：在酒馆配置正则

### 5.1 打开正则设置

在酒馆中打开正则替换设置，新建一条正则。

### 5.2 填写配置

**脚本名称**：随便起，比如 `远程播放器`

**查找正则表达式**：自定义一个标签，比如：

```
<MyPlayer/>
```

**替换为**（共 7 行，包含开头和结尾的三个反引号）：

````
```
<body>
<script>
  $('body').load('https://testingcf.jsdelivr.net/gh/你的用户名/你的仓库名@main/你的文件名.html')
</script>
</body>
```
````

> ⚠️ **重要**：替换内容必须包含 `<body>` 标签，这是酒馆助手识别前端代码的触发条件。

### 5.3 保存并测试

保存正则后，在聊天中输入 `<MyPlayer/>`（你设置的标签），看看组件是否正常加载。

---

## 第六步：更新组件

以后想更新组件代码时：

1. 打开 GitHub 仓库，找到你的文件
2. 点击文件右上角的 **✏️ 铅笔图标**（Edit file）
3. 直接在网页上修改代码
4. 点击右上角 **Commit changes...** 按钮
5. 选择 **Commit directly to the main branch**（直接提交）
6. 点击绿色 **Commit changes** 确认

更新后，用户的酒馆会在几分钟到几小时内自动获取新版，**无需用户做任何操作**。

---

## 常见问题

### Q：更新了 GitHub 但酒馆里还是旧版？

这是 CDN 缓存，通常等几分钟到几小时就会自动刷新。如果你自己测试想立刻看到效果，可以在链接中使用提交哈希（高级用法，一般不需要）。

### Q：我的组件在酒馆里不渲染？

检查正则的替换内容是否包含 `<body>` 标签。这是触发渲染的必要条件。

### Q：必须删除 `<html>` 标签吗？

不是必须的。浏览器容错性很强，套娃结构也能正常运行。但如果追求规范，建议删除。

---

## 快速参考

| 步骤         | 操作                                                               |
| ------------ | ------------------------------------------------------------------ |
| 注册         | github.com → Sign up                                               |
| 创建仓库     | + → New repository → Public                                        |
| 上传文件     | Add file → Upload files                                            |
| CDN 链接     | `https://testingcf.jsdelivr.net/gh/用户名/仓库名@main/文件名.html` |
| 正则触发标签 | 自定义，如 `<MyPlayer/>`                                           |
| 更新文件     | 点击 ✏️ 编辑 → Commit changes                                       |

---

🎉 **完成！** 现在你的组件已经托管在云端，用户只需配置一次正则，以后你更新代码，他们会自动获得新版。
